<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin - Workouts</title>
    <style>
      body {
        font-family: Arial;
        background: #111;
        color: #fff;
        padding: 2rem;
      }
      input,
      select,
      textarea,
      button {
        margin: 0.5rem 0;
        padding: 0.5rem;
        font-size: 1rem;
        width: 100%;
        border-radius: 5px;
        border: none;
      }
      button {
        cursor: pointer;
        background: gold;
        color: #111;
        font-weight: bold;
      }
      .session-card {
        background: #222;
        padding: 1rem;
        margin: 0.5rem 0;
        border-radius: 12px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
        transition: background 0.2s;
        text-transform: uppercase;
      }
      .session-card span.remove-btn {
        color: red;
        cursor: pointer;
        font-size: 0.8rem;
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        background: #111;
      }
    </style>
  </head>
  <body>
    <h1>ADMIN - ADD WORKOUT</h1>

    <label>Day:</label>
    <select id="day">
      <option value="MONDAY">MONDAY</option>
      <option value="TUESDAY">TUESDAY</option>
      <option value="WEDNESDAY">WEDNESDAY</option>
      <option value="THURSDAY">THURSDAY</option>
      <option value="FRIDAY">FRIDAY</option>
      <option value="SATURDAY">SATURDAY</option>
      <option value="SUNDAY">SUNDAY</option>
    </select>

    <label>Workout Name:</label>
    <select id="name">
      <option>LOWER STRENGTH + EASY RUN</option>
      <option>UPPER STRENGTH + SKI INTERVALS</option>
      <option>ELEV8 RUN CLUB</option>
      <option>CONDITIONING / ROW FOCUS</option>
      <option>UPPER STRENGTH + HYROX SIMULATION</option>
      <option>HYROX SATURDAY</option>
      <option>LONG RUN + CORE</option>
    </select>

    <label>Time:</label>
    <select id="time">
      <option>6:00 am â€“ 7:00 am (UK)</option>
      <option>6:00 pm â€“ 7:00 pm (UK)</option>
      <option>7:30 am â€“ 8:30 am (UK)</option>
    </select>

    <label>Encouragement:</label>
    <select id="encouragement">
      <option>YOU GOT THIS!</option>
      <option>KEEP IT UP!</option>
      <option>IT'S EASY!</option>
      <option>FEEL THE BURN!</option>
      <option>NO PAIN NO GAIN!</option>
      <option>CRUSH IT!</option>
      <option>LETS GO!</option>
    </select>

    <label>Workout Details:</label>
    <textarea
      id="details"
      rows="4"
      placeholder="Optional detailed workout info (HTML allowed)"
    ></textarea>

    <button id="addBtn">Add Workout</button>

    <h2>Current Workouts</h2>
    <div id="workoutList"></div>

    <script>
      // Default workouts (loaded if localStorage is empty)
      const defaultWorkouts = [
        {
          day: "MONDAY",
          name: "LOWER STRENGTH + EASY RUN",
          time: "6:00 am â€“ 7:00 am (UK)",
          encouragement: "YOU GOT THIS!",
          details: "Squats, lunges, easy run",
        },
        {
          day: "TUESDAY",
          name: "UPPER STRENGTH + SKI INTERVALS",
          time: "6:00 pm â€“ 7:00 pm (UK)",
          encouragement: "KEEP IT UP!",
          details: "Bench press, pull-ups, ski intervals",
        },
      ];

      let workouts = JSON.parse(localStorage.getItem("workouts") || "[]");
      if (workouts.length === 0) {
        workouts = defaultWorkouts;
        localStorage.setItem("workouts", JSON.stringify(workouts));
      }

      function renderWorkouts() {
        const list = document.getElementById("workoutList");
        list.innerHTML = "";
        workouts.forEach((w, i) => {
          const div = document.createElement("div");
          div.className = "session-card";
          div.innerHTML = `
        <div>
          <strong>${w.day}: ${w.name}</strong><br>
          <small>${w.time} | ${w.encouragement}</small>
        </div>
        <span class="remove-btn" onclick="removeWorkout(${i})">REMOVE</span>
      `;
          list.appendChild(div);
        });
      }

      function removeWorkout(index) {
        if (!confirm("Remove this workout?")) return;
        workouts.splice(index, 1);
        localStorage.setItem("workouts", JSON.stringify(workouts));
        renderWorkouts();
      }

      document.getElementById("addBtn").onclick = () => {
        const day = document.getElementById("day").value;
        const name = document.getElementById("name").value.toUpperCase();
        const time = document.getElementById("time").value;
        const encouragement = document.getElementById("encouragement").value;
        const details = document.getElementById("details").value;

        if (!name) return alert("Enter a workout name");
        workouts.push({ day, name, time, encouragement, details });
        localStorage.setItem("workouts", JSON.stringify(workouts));
        renderWorkouts();
        document.getElementById("details").value = "";
      };

      // Initial render
      renderWorkouts();

      // Save new workout
      document.getElementById("addWorkoutBtn").onclick = () => {
        const name = document.getElementById("name").value.trim();
        const day = document.getElementById("day").value.trim();
        const time = document.getElementById("time").value.trim();
        let details = document.getElementById("details").value.trim();

        if (!name || !day || !time || !details) {
          alert("Please fill in all fields.");
          return;
        }

        // ðŸ§¹ Auto-format details
        // Split by newlines or commas
        let lines = details
          .split(/[\n,]+/)
          .map((l) => l.trim())
          .filter((l) => l !== "");

        // Capitalize + clean each line
        lines = lines.map((line) => {
          // Capitalize first letter of each word
          line = line.toLowerCase().replace(/\b\w/g, (c) => c.toUpperCase());
          // Clean spacing (e.g., "4 x 6" â†’ "4x6")
          line = line.replace(/\s*x\s*/i, "x");
          return line;
        });

        // Join back with newlines
        details = lines.join("\n");

        // Build workout object
        const newWorkout = {
          name,
          day,
          time,
          details,
        };

        // Save workouts
        const workouts = JSON.parse(localStorage.getItem("workouts") || "[]");
        workouts.push(newWorkout);
        localStorage.setItem("workouts", JSON.stringify(workouts));

        alert("âœ… Workout added!");
        document.getElementById("details").value = details; // show formatted
      };
    </script>
  </body>
</html>

